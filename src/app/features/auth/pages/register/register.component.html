<!-- Imagen de registro exitoso -->
<div
  *ngIf="showSuccess"
  class="flex items-center justify-center gap-3 bg-green-100 border border-green-300 text-green-800 font-medium my-4 p-4 rounded-lg shadow-md transition duration-300 ease-in-out animate-fade-in"
>
  <!-- Icono animado -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 24 24"
  >
    <mask id="lineMdCheckAll0">
      <g
        fill="none"
        stroke="#fff"
        stroke-dasharray="24"
        stroke-dashoffset="24"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
      >
        <path d="M2 13.5l4 4l10.75 -10.75">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            dur="0.4s"
            values="24;0"
          />
        </path>
        <path stroke="#000" stroke-width="6" d="M7.5 13.5l4 4l10.75 -10.75">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            begin="0.4s"
            dur="0.4s"
            values="24;0"
          />
        </path>
        <path d="M7.5 13.5l4 4l10.75 -10.75">
          <animate
            fill="freeze"
            attributeName="stroke-dashoffset"
            begin="0.4s"
            dur="0.4s"
            values="24;0"
          />
        </path>
      </g>
    </mask>
    <rect width="24" height="24" fill="#3fe160" mask="url(#lineMdCheckAll0)" />
  </svg>

  <!-- Mensaje -->
  <span>Registro completado con éxito</span>
</div>

<div
  class="flex flex-col justify-center gap-6 bg-[#D1D0D0] p-10 shadow-xl rounded-md"
>
  <!-- Logo -->
  <div class="flex justify-center p-4">
    <img src="img/logo.png" class="w-[80%]" routerLink="" />
  </div>

  <!-- Título -->
  <div class="font-semibold text-center text-2xl underline underline-offset-10">
    <h1>Registrarse</h1>
  </div>

  <!-- Formulario -->
  <form
    class="w-full flex flex-col items-center gap-4 py-2"
    (ngSubmit)="onSubmit()"
    [formGroup]="registerForm"
  >
    <!-- Nombre -->
    <div class="w-[80%]">
      <input
        formControlName="nombre"
        type="text"
        placeholder="Nombre"
        class="w-full px-4 py-2 rounded-md bg-white shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div
        *ngIf="
          registerForm.get('nombre')?.touched &&
          registerForm.get('nombre')?.invalid
        "
        class="text-red-500 text-sm mt-1"
      >
        <div *ngIf="registerForm.get('nombre')?.errors?.['required']">
          El nombre es obligatorio.
        </div>
        <div *ngIf="registerForm.get('nombre')?.errors?.['minlength']">
          Mínimo 3 caracteres.
        </div>
      </div>
    </div>

    <!-- Email -->
    <div class="w-[80%]">
      <input
        formControlName="email"
        type="email"
        placeholder="Correo electrónico"
        class="w-full px-4 py-2 rounded-md bg-white shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div
        *ngIf="
          registerForm.get('email')?.touched &&
          registerForm.get('email')?.invalid
        "
        class="text-red-500 text-sm mt-1"
      >
        <div *ngIf="registerForm.get('email')?.errors?.['required']">
          El correo es obligatorio.
        </div>
        <div *ngIf="registerForm.get('email')?.errors?.['email']">
          Formato de correo inválido.
        </div>
      </div>
    </div>

    <!-- Contraseña -->
    <div class="w-[80%]">
      <input
        formControlName="contraseña"
        type="password"
        placeholder="Contraseña"
        class="w-full px-4 py-2 rounded-md bg-white shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div
        *ngIf="
          registerForm.get('contraseña')?.touched &&
          registerForm.get('contraseña')?.invalid
        "
        class="text-red-500 text-sm mt-1"
      >
        <div *ngIf="registerForm.get('contraseña')?.errors?.['required']">
          La contraseña es obligatoria.
        </div>
        <div *ngIf="registerForm.get('contraseña')?.errors?.['minlength']">
          Mínimo 6 caracteres.
        </div>
      </div>
    </div>

    <!-- Confirmar contraseña -->
    <div class="w-[80%]">
      <input
        formControlName="contraseña_confirmation"
        type="password"
        placeholder="Confirmar contraseña"
        class="w-full px-4 py-2 rounded-md bg-white shadow-sm border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div
        *ngIf="
          registerForm.get('contraseña_confirmation')?.touched &&
          registerForm.get('contraseña_confirmation')?.invalid
        "
        class="text-red-500 text-sm mt-1"
      >
        <div
          *ngIf="registerForm.get('contraseña_confirmation')?.errors?.['required']"
        >
          La confirmación es obligatoria.
        </div>
        <div
          *ngIf="registerForm.get('contraseña_confirmation')?.errors?.['minlength']"
        >
          Mínimo 6 caracteres.
        </div>
      </div>

      <!-- Validación personalizada: contraseñas no coinciden -->
      <div
        *ngIf="registerForm.errors?.['passwordMismatch'] && registerForm.get('contraseña_confirmation')?.touched"
        class="text-red-500 text-sm mt-1"
      >
        Las contraseñas no coinciden.
      </div>
    </div>

    <!-- Botón -->
    <div class="w-[80%] flex justify-center py-2">
      <button
        class="bg-[#2C3E50] text-white font-bold py-2 px-4 rounded hover:bg-[#405a74] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
      >
        Registrarse
      </button>
    </div>

    <!-- Enlace al login -->
    <div class="text-center text-sm mt-2">
      ¿Ya tienes cuenta?
      <a
        routerLink="/auth/login"
        class="text-blue-600 hover:underline hover:text-blue-800 transition duration-200"
      >
        Inicia sesión
      </a>
    </div>

    <!-- Error general -->
    <div
      *ngIf="errorMessage"
      class="text-red-600 text-center text-sm p-4 bg-red-100 rounded-md"
    >
      <p>{{ errorMessage }}</p>
    </div>
  </form>
</div>
